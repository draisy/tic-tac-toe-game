var cell = $('#box' + <%= @choice %>);

if (<%= @player1.class == Player && @player2.class == Player %>){
  updateCell(cell);
  turn.changeTurn();
}
else {
  turn.changeTurn();
  updateCell(cell);
  turn.changeTurn();
};
  
var winner = checkWinner();
if (winner !== undefined){
  var message = getMessage(winner);
  endGame(message);
}

function computerMove(cell) {
  $(cell).find('i').addClass('fa fa-circle-o fa-5x');
};

function checkWinner(){
  if ( (<%= @won ? @won : @won = false %>) !== false) {
    var winner = "tie";
    if(<%= @won %> === <%= @player1.id %>) {
      return winner = <%= @player1.id %>
    }
    else if (<%= @won %> === <%= @player2.id %>) {
      return winner = <%= @player2.id %>
    }
    else {
      return winner;
    }
  };
};

function getMessage(winner){
  if (winner === "tie"){
    return "It's a draw!";
  }
  else {
    return "Player " + (winner += 1) + " wins!"
  }
};

function endGame(message) {
  alert(message);
  location.reload();
};