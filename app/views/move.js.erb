//when assign var to function and when not?

if (<%= @player2.class == Player %>){
  turn.changeTurn();
};
  
  var cell = $('#box' + <%= @choice %>);
  changeCellColor(cell);

var winner = checkWinner();
if (winner !== undefined){
  var message = getMessage(winner);
  endGame(message);
}


function checkWinner(){
  if ( (<%= @won ? @won : @won = false %>) !== false) {
    var winner = "tie";
    if(<%= @won %> === <%= @player1.id %>) {
      winner = <%= @player1.id %>
    }
    else {
      winner = <%= @player2.id %>
    }
  };
  return winner;
};

function getMessage(winner){
  if (winner === "tie"){
    return "It's a draw!";
  }
  else {
    return "Player " + (winner += 1) + " wins!"
  }
};

function endGame(message) {
  alert(message);
  location.reload();
}


// Keep track of whose turn it is
// var turn = {
//   number : 0,
//   currentPlayerColor : function() {
//     if (this.number % 2 === 0) {
//       return 1;
//     }
//     else {
//       return 2;
//     }
//   },
//   changeTurn : function(){
//     this.number += 1;
//   },
//   getNumber : function(){
//     return this.number;
//   }
// };


function changeCellColor(cell) {
 // turn.changeTurn();
  // Change cell to the player color
  if (turn.currentPlayerColor() == 2){
    // Remove hover class immediately once clicked
    $(".box_cell").click(function () {
      $(this).removeClass("hover");
    });
    $(cell).addClass('blue');
   }
   else {
    $(cell).addClass('red');
  }
  //turn.changeTurn();
  console.log("player in move js: " + turn.currentPlayerColor());
}