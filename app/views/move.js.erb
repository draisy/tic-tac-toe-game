//when assign var to function and when not?

if (<%= @player2.class == Player %>){
  turn.changeTurn();
};
  
var cell = $('#box' + <%= @choice %>);
markMovePosition(cell);

var winner = checkWinner();
if (winner !== undefined){
  var message = getMessage(winner);
  endGame(message);
}


function checkWinner(){
  if ( (<%= @won ? @won : @won = false %>) !== false) {
    var winner = "tie";
    if(<%= @won %> === <%= @player1.id %>) {
      return winner = <%= @player1.id %>
    }
    else if (<%= @won %> === <%= @player2.id %>) {
      return winner = <%= @player2.id %>
    }
    else {
      return winner;
    }
  };
};

function getMessage(winner){
  if (winner === "tie"){
    return "It's a draw!";
  }
  else {
    return "Player " + (winner += 1) + " wins!"
  }
};

function endGame(message) {
  alert(message);
  location.reload();
}

function markMovePosition(cell) {
  // Change cell to the player color
  if (turn.currentPlayerColor() == 2){
    // Remove hover class immediately once clicked
    $(".box_cell").click(function () {
      $(this).removeClass("hover");
    });
    $(cell).find('i').addClass('fa fa-circle-o fa-5x');
   }
   else {
     $(cell).find('i').addClass('fa fa-times fa-5x')
  }
}